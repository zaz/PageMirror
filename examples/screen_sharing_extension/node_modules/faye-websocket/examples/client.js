import WebSocket from '../lib/faye/websocket';
var port      = process.argv[2] || 7000;
var secure    = process.argv[3] === 'ssl';
var scheme    = secure ? 'wss' : 'ws';
var ws        = new WebSocket.Client(scheme + '://localhost:' + port + '/');

console.log('Connecting to ' + ws.url);

ws.onopen = event => {
  console.log('open');
  ws.send('Hello, WebSocket!');
};

ws.onmessage = event => {
  console.log('message', event.data);
  // ws.close(1002, 'Going away');
};

ws.onclose = event => {
  console.log('close', event.code, event.reason);
};

